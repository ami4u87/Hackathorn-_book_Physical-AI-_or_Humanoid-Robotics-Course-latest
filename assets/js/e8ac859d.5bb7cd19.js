"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics=globalThis.webpackChunkphysical_ai_humanoid_robotics||[]).push([[62],{8285:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>d});var i=n(4848),a=n(8453);const o={},s="RViz2 Visualization",t={id:"module-3-perception/rviz",title:"RViz2 Visualization",description:"RViz2 is the primary visualization tool for ROS 2, allowing you to see sensor data, robot state, and planning results in 3D.",source:"@site/docs/module-3-perception/4-rviz.md",sourceDirName:"module-3-perception",slug:"/module-3-perception/rviz",permalink:"/Hackathorn-_book_Physical-AI-_or_Humanoid-Robotics-Course-latest/docs/module-3-perception/rviz",draft:!1,unlisted:!1,editUrl:"https://github.com/ami4u87/Hackathorn-_book_Physical-AI-_or_Humanoid-Robotics-Course-latest/tree/master/docs/module-3-perception/4-rviz.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"docsSidebar",previous:{title:"Pose Estimation and TF Publishing",permalink:"/Hackathorn-_book_Physical-AI-_or_Humanoid-Robotics-Course-latest/docs/module-3-perception/pose-tf"},next:{title:"Control System Integration",permalink:"/Hackathorn-_book_Physical-AI-_or_Humanoid-Robotics-Course-latest/docs/module-3-perception/control-integration"}},l={},d=[{value:"Launching RViz2",id:"launching-rviz2",level:2},{value:"Common Displays",id:"common-displays",level:2},{value:"1. TF (Transform Frames)",id:"1-tf-transform-frames",level:3},{value:"2. Camera",id:"2-camera",level:3},{value:"3. PointCloud2",id:"3-pointcloud2",level:3},{value:"4. Image",id:"4-image",level:3},{value:"5. Marker",id:"5-marker",level:3},{value:"6. MarkerArray",id:"6-markerarray",level:3},{value:"Robot Model Display",id:"robot-model-display",level:2},{value:"Path Display",id:"path-display",level:2},{value:"Interactive Markers",id:"interactive-markers",level:2},{value:"Saving and Loading Configurations",id:"saving-and-loading-configurations",level:2},{value:"Custom Plugins",id:"custom-plugins",level:2},{value:"Performance Tips",id:"performance-tips",level:2},{value:"Further Reading",id:"further-reading",level:2}];function c(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.h1,{id:"rviz2-visualization",children:"RViz2 Visualization"}),"\n",(0,i.jsx)(r.p,{children:"RViz2 is the primary visualization tool for ROS 2, allowing you to see sensor data, robot state, and planning results in 3D."}),"\n",(0,i.jsx)(r.h2,{id:"launching-rviz2",children:"Launching RViz2"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# Basic launch\nros2 run rviz2 rviz2\n\n# With config file\nros2 run rviz2 rviz2 -d ~/my_config.rviz\n\n# In launch file\nfrom launch_ros.actions import Node\n\nNode(\n    package='rviz2',\n    executable='rviz2',\n    arguments=['-d', '/path/to/config.rviz']\n)\n"})}),"\n",(0,i.jsx)(r.h2,{id:"common-displays",children:"Common Displays"}),"\n",(0,i.jsx)(r.h3,{id:"1-tf-transform-frames",children:"1. TF (Transform Frames)"}),"\n",(0,i.jsx)(r.p,{children:"Shows all coordinate frames and their relationships."}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Setup"}),":"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Add > TF"}),"\n",(0,i.jsx)(r.li,{children:"Adjust marker scale for visibility"}),"\n",(0,i.jsx)(r.li,{children:"Enable/disable specific frames"}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"2-camera",children:"2. Camera"}),"\n",(0,i.jsx)(r.p,{children:"Display camera feeds."}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Setup"}),":"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Add > Camera"}),"\n",(0,i.jsxs)(r.li,{children:["Topic: ",(0,i.jsx)(r.code,{children:"/camera/image_raw"})]}),"\n",(0,i.jsx)(r.li,{children:"Set overlay alpha for transparency"}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"3-pointcloud2",children:"3. PointCloud2"}),"\n",(0,i.jsx)(r.p,{children:"Visualize 3D point clouds."}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Setup"}),":"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Add > PointCloud2"}),"\n",(0,i.jsxs)(r.li,{children:["Topic: ",(0,i.jsx)(r.code,{children:"/camera/points"})]}),"\n",(0,i.jsx)(r.li,{children:"Style: Points, Flat Squares, or Spheres"}),"\n",(0,i.jsx)(r.li,{children:"Size: Adjust point size"}),"\n",(0,i.jsx)(r.li,{children:"Color Transformer: RGB8, Intensity, or AxisColor"}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"4-image",children:"4. Image"}),"\n",(0,i.jsx)(r.p,{children:"Display 2D images with overlays."}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Setup"}),":"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Add > Image"}),"\n",(0,i.jsxs)(r.li,{children:["Topic: ",(0,i.jsx)(r.code,{children:"/detection/image"})]}),"\n",(0,i.jsx)(r.li,{children:"Useful for showing detection results"}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"5-marker",children:"5. Marker"}),"\n",(0,i.jsx)(r.p,{children:"Custom 3D shapes and text."}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"from visualization_msgs.msg import Marker\n\ndef create_sphere_marker(position, color, marker_id=0):\n    marker = Marker()\n    marker.header.frame_id = \"map\"\n    marker.header.stamp = node.get_clock().now().to_msg()\n    marker.id = marker_id\n    marker.type = Marker.SPHERE\n    marker.action = Marker.ADD\n\n    marker.pose.position.x = position[0]\n    marker.pose.position.y = position[1]\n    marker.pose.position.z = position[2]\n    marker.pose.orientation.w = 1.0\n\n    marker.scale.x = 0.2\n    marker.scale.y = 0.2\n    marker.scale.z = 0.2\n\n    marker.color.r = color[0]\n    marker.color.g = color[1]\n    marker.color.b = color[2]\n    marker.color.a = 1.0\n\n    return marker\n\n# Publish\nmarker_pub = node.create_publisher(Marker, '/visualization_marker', 10)\nmarker_pub.publish(create_sphere_marker([1.0, 0.5, 0.3], [1.0, 0.0, 0.0]))\n"})}),"\n",(0,i.jsx)(r.h3,{id:"6-markerarray",children:"6. MarkerArray"}),"\n",(0,i.jsx)(r.p,{children:"Multiple markers efficiently."}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"from visualization_msgs.msg import MarkerArray\n\ndef create_detection_markers(detections_3d):\n    marker_array = MarkerArray()\n\n    for i, det in enumerate(detections_3d):\n        # Sphere for object\n        marker = Marker()\n        marker.header.frame_id = \"camera_link\"\n        marker.header.stamp = node.get_clock().now().to_msg()\n        marker.id = i\n        marker.type = Marker.CUBE\n        marker.action = Marker.ADD\n\n        marker.pose.position.x = det['position'][0]\n        marker.pose.position.y = det['position'][1]\n        marker.pose.position.z = det['position'][2]\n        marker.pose.orientation.w = 1.0\n\n        marker.scale.x = det['size'][0]\n        marker.scale.y = det['size'][1]\n        marker.scale.z = det['size'][2]\n\n        marker.color.g = 1.0\n        marker.color.a = 0.5\n\n        marker_array.markers.append(marker)\n\n        # Text label\n        text_marker = Marker()\n        text_marker.header = marker.header\n        text_marker.id = i + 1000\n        text_marker.type = Marker.TEXT_VIEW_FACING\n        text_marker.action = Marker.ADD\n\n        text_marker.pose.position.x = det['position'][0]\n        text_marker.pose.position.y = det['position'][1]\n        text_marker.pose.position.z = det['position'][2] + 0.2\n\n        text_marker.scale.z = 0.1\n        text_marker.color.r = 1.0\n        text_marker.color.g = 1.0\n        text_marker.color.b = 1.0\n        text_marker.color.a = 1.0\n\n        text_marker.text = f\"{det['class_name']} ({det['score']:.2f})\"\n\n        marker_array.markers.append(text_marker)\n\n    return marker_array\n"})}),"\n",(0,i.jsx)(r.h2,{id:"robot-model-display",children:"Robot Model Display"}),"\n",(0,i.jsx)(r.p,{children:"Show URDF/SDF robot model."}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Setup"}),":"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Add > RobotModel"}),"\n",(0,i.jsxs)(r.li,{children:["Description Topic: ",(0,i.jsx)(r.code,{children:"/robot_description"})]}),"\n",(0,i.jsx)(r.li,{children:"TF Prefix: (leave empty or set if using namespaces)"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"path-display",children:"Path Display"}),"\n",(0,i.jsx)(r.p,{children:"Visualize planned trajectories."}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'from nav_msgs.msg import Path\nfrom geometry_msgs.msg import PoseStamped\n\ndef create_path(waypoints):\n    """Create path from list of (x, y, z) waypoints"""\n    path = Path()\n    path.header.frame_id = "map"\n    path.header.stamp = node.get_clock().now().to_msg()\n\n    for wp in waypoints:\n        pose = PoseStamped()\n        pose.header = path.header\n        pose.pose.position.x = wp[0]\n        pose.pose.position.y = wp[1]\n        pose.pose.position.z = wp[2]\n        pose.pose.orientation.w = 1.0\n\n        path.poses.append(pose)\n\n    return path\n\n# Example\nwaypoints = [(0, 0, 0), (1, 0, 0), (1, 1, 0), (1, 1, 1)]\npath_pub = node.create_publisher(Path, \'/planned_path\', 10)\npath_pub.publish(create_path(waypoints))\n'})}),"\n",(0,i.jsx)(r.h2,{id:"interactive-markers",children:"Interactive Markers"}),"\n",(0,i.jsx)(r.p,{children:"Allow user interaction in RViz2."}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'from interactive_markers import InteractiveMarkerServer\nfrom visualization_msgs.msg import InteractiveMarker, InteractiveMarkerControl\n\nclass InteractiveMarkerNode(Node):\n    def __init__(self):\n        super().__init__(\'interactive_marker_node\')\n\n        self.server = InteractiveMarkerServer(self, \'simple_marker\')\n\n        # Create marker\n        int_marker = InteractiveMarker()\n        int_marker.header.frame_id = "map"\n        int_marker.name = "goal_marker"\n        int_marker.description = "Drag to set goal"\n\n        # Create control\n        control = InteractiveMarkerControl()\n        control.interaction_mode = InteractiveMarkerControl.MOVE_3D\n        int_marker.controls.append(control)\n\n        # Add to server\n        self.server.insert(int_marker, self.marker_feedback)\n        self.server.applyChanges()\n\n    def marker_feedback(self, feedback):\n        self.get_logger().info(f"Marker at: {feedback.pose.position}")\n'})}),"\n",(0,i.jsx)(r.h2,{id:"saving-and-loading-configurations",children:"Saving and Loading Configurations"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# Save current config\nFile > Save Config As > my_config.rviz\n\n# Load config\nFile > Open Config > my_config.rviz\n\n# Or via command line\nros2 run rviz2 rviz2 -d my_config.rviz\n"})}),"\n",(0,i.jsx)(r.h2,{id:"custom-plugins",children:"Custom Plugins"}),"\n",(0,i.jsx)(r.p,{children:"Create custom RViz2 plugins for specialized visualization."}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-cpp",children:"// Custom panel example (C++)\n#include <rviz_common/panel.hpp>\n\nclass MyCustomPanel : public rviz_common::Panel\n{\n  Q_OBJECT\npublic:\n  MyCustomPanel(QWidget* parent = nullptr);\n  virtual void onInitialize() override;\n\n  // Add custom UI and functionality\n};\n"})}),"\n",(0,i.jsx)(r.h2,{id:"performance-tips",children:"Performance Tips"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Reduce point cloud density"}),": Downsample before publishing"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Limit marker count"}),": Use MarkerArray efficiently"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Adjust update rates"}),": Slower rates for non-critical displays"]}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.strong,{children:"Use PointCloud2 instead of individual points"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.strong,{children:"Disable unused displays"})}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://github.com/ros2/rviz",children:"RViz2 User Guide"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"http://wiki.ros.org/rviz/DisplayTypes/Marker",children:"Visualization Markers"})}),"\n"]})]})}function p(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>t});var i=n(6540);const a={},o=i.createContext(a);function s(e){const r=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(o.Provider,{value:r},e.children)}}}]);